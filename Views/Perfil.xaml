<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="AppFitShare.Views.Perfil"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    Title="Perfil"
        xmlns:converters="clr-namespace:AppFitShare.Converters"
    xmlns:viewmodels="clr-namespace:AppFitShare.ViewModels"
    Background="#0c1420"
    IconImageSource="perfil.png"
    NavigationPage.HasNavigationBar="False">
    <ContentPage.BindingContext>
        <viewmodels:HomeViewModel />
    </ContentPage.BindingContext>

    <ContentPage.Resources>
        <converters:StreakImageConverter x:Key="StreakImageConverter"/>
    </ContentPage.Resources>
    <VerticalStackLayout Margin="10" Spacing="20">

        <Label
            x:Name="lbl_username"
            Margin="0,10,0,0"
            FontAttributes="Bold"
            FontSize="20"
            HorizontalOptions="Center"
            TextColor="White" />

        <Border
                Margin="15,20"
                Padding="0,10,0,20"
                Stroke="Gray"
                StrokeLineJoin="Round"
                StrokeShape="RoundRectangle 10">
            <HorizontalStackLayout>
                <Grid ColumnDefinitions="auto,auto,auto,auto,auto,auto" RowDefinitions="auto,auto,auto,auto,auto,auto,auto">

                    <Label
                            Grid.Row="5"
                            Padding="10"
                            FontAttributes="Bold"
                            FontFamily="Poppins"
                            FontSize="16"
                            Text="Nesta semana"
                            TextColor="White" />
                    <Label
                            Grid.Row="5"
                            Grid.Column="0"
                            Padding="10,30,0,10"
                            Text="Sequencia atual:"
                            TextColor="White" />
                    <Label
                            Grid.Row="5"
                            Grid.Column="0"
                            Padding="120,30,0,10"
                            FontAttributes="Bold"
                            Text="{Binding TextoSequencia}"
                            TextColor="#01C853" />
                    <!--  DIAS DA SEMANA  -->

                    <Border
                            Grid.Row="6"
                            Margin="22,0,0,0"
                            Padding="5,15"
                            BackgroundColor="#1a2737"
                            Stroke="Gray"
                            StrokeShape="RoundRectangle 15">
                        <HorizontalStackLayout BindableLayout.ItemsSource="{Binding StreakSemanal}"
                                                   HorizontalOptions="Center"
                                                   Spacing="15">
                            <BindableLayout.ItemTemplate>
                                <DataTemplate>
                                    <VerticalStackLayout Spacing="5">

                                        <Image Source="{Binding Concluido, Converter={StaticResource StreakImageConverter}}"
                                                   WidthRequest="30"
                                                   HeightRequest="30"
                                                   VerticalOptions="Center" />

                                        <Label Text="{Binding LetraDia}" 
                                                   TextColor="Gray" 
                                                   FontSize="13"
                                                   FontAttributes="Bold"
                                                   HorizontalOptions="Center"
                                                   FontFamily="Poppins"/>

                                    </VerticalStackLayout>
                                </DataTemplate>
                            </BindableLayout.ItemTemplate>
                        </HorizontalStackLayout>
                    </Border>
                </Grid>
            </HorizontalStackLayout>
        </Border>


        <Grid
            Margin="10"
            ColumnDefinitions="*,*"
            RowDefinitions="Auto,Auto,Auto">
            <Label
                x:Name="lbl_nome"
                Grid.Column="0"
                Grid.ColumnSpan="2"
                FontAttributes="Bold"
                FontSize="17"
                HorizontalOptions="Start"
                TextColor="White" />
            <Label
                x:Name="lbl_telefone"
                IsVisible="False"
                Grid.Row="1"
                Grid.Column="0"
                FontSize="15"
                HorizontalOptions="Start"
                TextColor="White" />
            <Label
                x:Name="lbl_idade"
                IsVisible="False"
                Grid.Row="1"
                Grid.Column="1"
                FontSize="15"
                HorizontalOptions="Start"
                TextColor="White" />
            <Label
                x:Name="lbl_peso"
                IsVisible="False"
                Grid.Row="2"
                Grid.Column="0"
                FontSize="15"
                HorizontalOptions="Start"
                TextColor="White" />
            <Label
                x:Name="lbl_altura"
                IsVisible="False"
                Grid.Row="2"
                Grid.Column="1"
                FontSize="15"
                HorizontalOptions="Start"
                TextColor="White" />

        </Grid>



        <Grid ColumnDefinitions="*,*" ColumnSpacing="20" Margin="10,5">
            <Button
                Grid.Column="0"
                Padding="20,10"
                Clicked="BtnEditarPerfil"
                CornerRadius="10"
                FontSize="18"
                Text="Editar perfil"
                TextColor="Black" />
            <Button
                Grid.Column="1"
                Padding="20,10"
                Clicked="BtnSair"
                CornerRadius="10"
                FontSize="18"
                Text="Sair"
                TextColor="Black" />
        </Grid>

        <Button
            Padding="20,10"
            Clicked="BtnCadastrarDados"
            CornerRadius="20"
            FontSize="18"
            IsVisible="False"
            Text="Cadastrar Completo"
            TextColor="Black"
            WidthRequest="365" />
    </VerticalStackLayout>
</ContentPage>