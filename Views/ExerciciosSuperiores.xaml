<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="AppFitShare.Views.ExerciciosSuperiores"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewmodels="clr-namespace:AppFitShare.ViewModels"
    xmlns:models="clr-namespace:AppFitShare.Models"
    Title="ExerciciosSuperiores"
    NavigationPage.HasNavigationBar="False">
    <ContentPage.BindingContext>
        <viewmodels:ExerciciosSupeioresViewModel />
    </ContentPage.BindingContext>
    <ScrollView>
        <VerticalStackLayout BackgroundColor="#0C1420">
            <Grid 
                ColumnDefinitions="Auto, *, Auto" 
                VerticalOptions="Start" 
                Padding="15, 20">
                <ImageButton
                    Grid.Column="0"
                    Source="back.png"
                    BackgroundColor="Transparent"
                    HeightRequest="30"
                    WidthRequest="30"
                    VerticalOptions="Center" 
                    Clicked="Voltar"/>
                <Label
                    Grid.Column="1"
                    Margin="10,0"
                    FontAttributes="Bold"
                    FontSize="18"
                    Text="Membros Superiores"
                    TextColor="White"
                    HorizontalOptions="Start"
                    VerticalOptions="Center" />
                <Button
                    Margin="0,5,0,0"    
                    Grid.Column="2"
                    Text="Criar"
                    BackgroundColor="#01b853"
                    TextColor="White"
                    BorderColor="#01b853"
                    BorderWidth="1"
                    CornerRadius="5"
                    FontSize="12"
                    HeightRequest="35"
                    WidthRequest="120"
                    VerticalOptions="Center"
                    HorizontalOptions="End"/>
            </Grid>
            <Label
                Padding="15, 5, 15, 20"
                FontAttributes="Bold"
                FontSize="18"
                Text="Lista de exercícios"
                TextColor="White" />
            <CollectionView ItemsSource="{Binding ListaDeExercicios}" Margin="15,0">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="models:Exercicio">
                        <VerticalStackLayout Margin="0,0,0,10">
                            <Grid ColumnDefinitions="110, *, Auto" ColumnSpacing="10">
                                <Border
                                    Grid.Column="0"
                                    HeightRequest="100"
                                    WidthRequest="110"
                                    Stroke="Transparent"
                                    StrokeShape="RoundRectangle 15">
                                    <Image 
                                        Source="{Binding Imagem}" 
                                        Aspect="AspectFill" />
                                </Border>
                                <VerticalStackLayout Grid.Column="1" VerticalOptions="Center">
                                    <Label 
                                        Text="{Binding Nome}" 
                                        FontAttributes="Bold" 
                                        FontSize="16" 
                                        TextColor="White" />
                                    <Label>
                                        <Label.FormattedText>
                                            <FormattedString>
                                                <Span Text="{Binding Series}" FontAttributes="Bold" TextColor="LightGray"/>
                                                <Span Text=" séries" TextColor="LightGray"/>
                                                <Span Text=", " TextColor="LightGray"/>
                                                <Span Text="{Binding Repeticoes}" FontAttributes="Bold" TextColor="LightGray"/>
                                                <Span Text=" repetições" TextColor="LightGray"/>
                                            </FormattedString>
                                        </Label.FormattedText>
                                    </Label>
                                </VerticalStackLayout>
                                <Button Grid.Column="2"
                                        Text="Selecionar"
                                        FontSize="12"
                                        HeightRequest="35"
                                        WidthRequest="90"
                                        CornerRadius="5"
                                        VerticalOptions="Center"
                                        HorizontalOptions="End"
                                        Margin="0,0,5,0"
                                        BorderColor="#01b853"
                                        BorderWidth="1"
                                        Command="{Binding Source={RelativeSource AncestorType={x:Type viewmodels:ExerciciosSupeioresViewModel}}, Path=ToggleSelecaoCommand}"
                                        CommandParameter="{Binding .}">
                                    <Button.Triggers>
                                        <DataTrigger TargetType="Button" Binding="{Binding EstaSelecionado}" Value="True">
                                            <Setter Property="BackgroundColor" Value="#01b853" />
                                            <Setter Property="TextColor" Value="White" />
                                        </DataTrigger>

                                        <DataTrigger TargetType="Button" Binding="{Binding EstaSelecionado}" Value="False">
                                            <Setter Property="BackgroundColor" Value="Transparent" />
                                            <Setter Property="TextColor" Value="#01b853" />
                                        </DataTrigger>
                                    </Button.Triggers>
                                </Button>
                            </Grid>
                            <BoxView HeightRequest="1" Color="#253A51" Margin="0,5,0,0"/>
                        </VerticalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>